$(document).on("click change",".well-option",function(e){var l=$(e.currentTarget).attr("id");if("well-setMode"!=l||"click"!=e.type)switch(l){case"well-setMode":wellClient.csta.setAgentMode();break;case"well-make":wellClient.csta.makeCall();break;case"well-answer":wellClient.csta.answerCall();break;case"well-hold":wellClient.csta.holdCall();break;case"well-retrieve":wellClient.csta.retrieveCall();break;case"well-sTran":wellClient.csta.singleStepTransfer();break;case"well-tran":wellClient.csta.transfer();break;case"well-ask":wellClient.csta.consultationCall();break;case"well-cAsk":wellClient.csta.cancelConsult();break;case"well-sConf":wellClient.csta.singleStepConference();break;case"well-conf":wellClient.csta.conference();break;case"well-dropCon":wellClient.csta.dropConnection();break;case"well-logout":wellClient.csta.logout();break;case"well-login":wellClient.csta.login();break;default:return}}),wellClient.csta={transfer:function(){var e=wellClient.get(".well-callLine"),l="",n="";2===e.length&&(l=e.eq(0).data("callid"),n=e.eq(1).data("callid"),wellClient.ui.disableBtns(["conf"]),wellClient.transferCall(l,n).always(function(){wellClient.ui.enableBtns(["conf"])}))},cancelConsult:function(){var e=wellClient.get(".well-callLine"),l="",n="";2===e.length&&(l=e.eq(0).data("callid"),n=e.eq(1).data("callid"),wellClient.ui.disableBtns(["conf"]),wellClient.cancelConsult(l,n).always(function(){wellClient.ui.enableBtns(["conf"])}))},conference:function(){var e=wellClient.get(".well-callLine"),l="",n="";2===e.length&&(l=e.eq(0).data("callid"),n=e.eq(1).data("callid"),wellClient.ui.disableBtns(["conf"]),wellClient.conference(l,n).always(function(){wellClient.ui.enableBtns(["conf"])}))},consultationCall:function(){var e=wellClient.get(".well-callLine"),l="",n=$("#well-number");if(phoneNumber=n.val(),!wellClient.isPhoneNumber(phoneNumber))return void wellClinet.error("不是合法手机号");1===e.length&&(l=e.data("callid")),wellClient.ui.disableBtns(["ask"]),wellClient.consult(l,phoneNumber).always(function(){wellClient.ui.enableBtns(["ask"])})},singleStepConference:function(){var e=wellClient.get(".well-callLine"),l="",n=$("#well-number");if(phoneNumber=n.val(),!wellClient.isPhoneNumber(phoneNumber))return void wellClinet.error("不是合法手机号");1===e.length&&(l=e.data("callid")),wellClient.ui.disableBtns(["sConf"]),wellClient.singleStepConference(l,phoneNumber).always(function(){wellClient.ui.enableBtns(["sConf"])})},singleStepTransfer:function(){var e=wellClient.get(".well-callLine"),l="",n=$("#well-number");if(phoneNumber=n.val(),!wellClient.isPhoneNumber(phoneNumber))return void wellClinet.error("不是合法手机号");1===e.length&&(l=e.data("callid")),wellClient.ui.disableBtns(["sTran"]),wellClient.singleStepTransfer(l,phoneNumber).always(function(){wellClient.ui.enableBtns(["sTran"])})},retrieveCall:function(){var e=wellClient.get(".well-callLine"),l="";1===e.length&&(l=e.data("callid")),wellClient.ui.disableBtns(["retrieve"]),wellClient.retrieveCall(l).always(function(){wellClient.ui.enableBtns(["retrieve"])})},holdCall:function(){var e=wellClient.get(".well-callLine"),l="";wellClient.ui.disableBtns(["hold"]),1===e.length&&(l=e.data("callid")),wellClient.holdCall(l).always(function(){wellClient.ui.enableBtns(["hold"])})},setAgentMode:function(){var e=wellClient.get("#well-setMode").val();wellClient.setAgentMode(e).fail(function(e){wellClient.error(e)})},makeCall:function(){var e=$("#well-number"),l=e.val();wellClient.ui.disableBtns(["make"]),wellClient.makeCall(l).done(function(e){}).fail(function(e){wellClient.error(e)}).always(function(){wellClient.ui.enableBtns(["make"])})},logout:function(){wellClient.logout().done(function(){wellClient.ui.resetUi()})},login:function(){wellClient.login()},answerCall:function(){var e=wellClient.get(".well-callLine"),l="";wellClient.ui.disableBtns(["answer"]),1===e.length&&(l=e.data("callid")),wellClient.answerCall(l).always(function(){wellClient.ui.enableBtns(["answer"])})},dropConnection:function(){var e=wellClient.get(".well-callLine"),l="";wellClient.ui.disableBtns(["dropCon"]),1===e.length?l=e.data("callid"):2===e.length&&(l=e.eq(1).data("callid")),wellClient.dropConnection(l).always(function(){wellClient.ui.enableBtns(["dropCon"])})}},wellClient.ui={getBtns:function(e){return wellClient.get("#well-"+e.join(",#well-"))},disableBtns:function(e){wellClient.ui.getBtns(e).attr("disabled","disabled").removeClass("well-active")},enableBtns:function(e){wellClient.ui.getBtns(e).removeAttr("disabled").addClass("well-active")},main:function(e){wellClient.ui[e.eventName](e)},resetUi:function(){wellClient.get(".well-control").attr("disabled","disabled").removeClass("well-active"),wellClient.get("#well-login").removeClass("well-dn"),wellClient.get("#well-logout").addClass("well-dn")},agentLoggedOn:function(e){wellClient.get("#well-login").addClass("well-dn"),wellClient.get("#well-logout").removeClass("well-dn");var l=wellClient.ui.getBtns(["make","setMode"]);wellClient.get(l).removeAttr("disabled"),wellClient.ui.enableBtns(["make","logout"])},agentLoggedOff:function(e){wellClient.get("#well-login").removeClass("well-dn"),wellClient.get("#well-logout").addClass("well-dn")},agentReady:function(e){},originated:function(e){wellClient.get("#well-phone").append(wellClient.render('<div id="well-device-{{device}}" data-deviceid="{{deviceId}}" data-callid="{{callId}}" class="well-inline well-callLine"><span class="well-showPhone">{{device}}</span><span class="well-showState">呼出</span></div>',e)),wellClient.ui.getBtns(["drop"]).removeAttr("disabled")},delivered:function(e){var l=wellClient.get("#well-device-"+e.device);if(0===l.length){wellClient.get("#well-phone").append(wellClient.render('<div id="well-device-{{device}}" data-deviceid="{{deviceId}}" data-callid="{{callId}}" class="well-inline well-callLine"><span class="well-showPhone">{{device}}</span><span class="well-showState">呼入</span></div>',e)),wellClient.ui.enableBtns(["answer","dropCon"])}else l.find(".well-showState").text("振铃"),wellClient.ui.enableBtns(["dropCon"]);wellClient.ui.disableBtns(["make"])},established:function(e){var l=wellClient.get("#well-device-"+e.device),n=$(".well-callLine");if(l.find(".well-showState").text("通话中"),1===n.length)wellClient.ui.disableBtns(["make","answer"]),wellClient.ui.enableBtns(["hold","sTran","dropCon","ask","sConf"]);else if(2===n.length){var t=n.eq(0).find(".well-showState").text();"保持"===t&&(wellClient.ui.disableBtns(["make","answer","hold","sTran","sConf","ask"]),wellClient.ui.enableBtns(["conf","dropCon","cAsk","tran"]))}},connectionCleared:function(e){var l=wellClient.get("#well-device-"+e.device),n=wellClient.get(".well-callLine");if(0!==l.length){if(e.needClearAll)return n.remove(),wellClient.ui.enableBtns(["make"]),void wellClient.ui.disableBtns(["conf","dropCon","answer","hold","sTran","sConf","ask"]);l.remove(),1===n.length?(wellClient.ui.disableBtns(["answer","hold","sTran","sConf","ask","conf","dropCon","cAsk","tran"]),wellClient.ui.enableBtns(["make"])):2===n.length&&(wellClient.ui.disableBtns(["make","answer","conf","cAsk","tran"]),wellClient.ui.enableBtns(["hold","sTran","sConf","ask","dropCon"]))}},held:function(e){var l=wellClient.get("#well-device-"+e.device),n=wellClient.get(".well-callLine");l.find(".well-showState").text("保持"),l.data("state","held"),1===n.length&&(wellClient.get("#well-hold").addClass("well-dn"),wellClient.get("#well-retrieve").removeClass("well-dn"))},retrieved:function(e){var l=wellClient.get("#well-device-"+e.device),n=wellClient.get(".well-callLine");l.find(".well-showState").text("通话中"),1===n.length&&(wellClient.get("#well-hold").removeClass("well-dn"),wellClient.get("#well-retrieve").addClass("well-dn"),wellClient.ui.disableBtns(["make","answer","conf"]),wellClient.ui.enableBtns(["hold","sTran","sConf","ask","dropCon"]))},conferenced:function(e){var l=wellClient.get(".well-callLine");l.data("callid",e.callId),l.data("state","conferenced"),$(".well-showState").text("会议中"),wellClient.ui.disableBtns(["make","answer","hold","sTran","sConf","ask","conf","cAsk","tran"])}};